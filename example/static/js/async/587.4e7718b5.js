"use strict";(self.webpackChunkexample=self.webpackChunkexample||[]).push([["587"],{9558(e,a,t){t.r(a),t.d(a,{Component:()=>u,default:()=>m});var i=t(8990),n=t(1085),r=t(7688),s=t(7765),d=t(1790),o=t(3704),l=t(6363),c=t(4115),g=t(4041);class h extends s.FairysPageData{get defaultStore(){return{...super.defaultStore,editType:"add",editFormData:this.ref({}),editVisible:!1}}constructor(...e){super(...e),(0,i._)(this,"onEditOrAdd",(e,a)=>{this.store.editFormData=this.ref(a||{}),this.store.editType=e,this.store.editVisible=!0})}}let u=()=>{var e;let a,[t]=d.A.useForm(),i=(e={getList:async e=>(console.log("打印查询参数",e),await new Promise(e=>setTimeout(e,3e3)),Promise.resolve({total:100,list:Array.from({length:20},(a,t)=>({name:`姓名${t+1+(e.page-1)*e.pageSize}`,age:20+t}))}))},(a=(0,g.useRef)()).current||(a.current=new h(e)),a.current),u=(0,s.useFairysPageDataSnapshot)(i);return console.log("state-custom",u,i),console.log("customState-edit数据",u.state.editFormData,u.state.editType,u.state.editVisible),(0,g.useEffect)(()=>{i.onUpdatedPage(1)},[]),(0,n.jsx)(s.FairysPageDataContext.Provider,{value:i,children:(0,n.jsxs)(r.FairysMainPage,{children:[(0,n.jsx)(r.FairysMainPageSearch,{children:(0,n.jsxs)(d.A,{form:t,initialValues:u.search,onValuesChange:e=>{i.onUpdatedSearch(e)},layout:"inline",children:[(0,n.jsx)(d.A.Item,{label:"姓名",name:"name",children:(0,n.jsx)(o.A,{})}),(0,n.jsx)(d.A.Item,{label:"年龄",name:"age",children:(0,n.jsx)(o.A,{})}),(0,n.jsxs)(d.A.Item,{children:[(0,n.jsx)(l.Ay,{type:"primary",onClick:()=>i.onUpdatedPage(1),children:"查询"}),(0,n.jsx)(l.Ay,{onClick:()=>{t.setFieldsValue({name:void 0,age:void 0}),i.onResetSearch({name:void 0,age:void 0})},children:"重置"}),(0,n.jsx)(l.Ay,{type:"primary",onClick:()=>{i.onEditOrAdd("add")},children:"新增"})]})]})}),(0,n.jsx)(r.FairysMainPageBody,{children:(0,n.jsx)(c.A,{loading:!!u.loading,rowKey:"name",columns:[{title:"操作",dataIndex:"operation",key:"operation",width:120,fixed:"right",render:(e,a)=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(l.Ay,{onClick:()=>i.onEditOrAdd("edit",a),children:"编辑"})})},{title:"姓名",dataIndex:"name",key:"name"},{title:"年龄",dataIndex:"age",key:"age"}],dataSource:u.dataList,pagination:{total:u.total,current:(null==u?void 0:u.page)||1,pageSize:(null==u?void 0:u.pageSize)||20,onChange(e,a){i.onUpdatedPage(e,a)}}})})]})})},m=u}}]);