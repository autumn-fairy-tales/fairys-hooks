(()=>{"use strict";var e,t,a,s,o,r,i,n={6111(e,t,a){var s=a(1085),o=a(5873),r=a(7688),i=a(4041);let n=[{title:"主菜单",path:"main-menu",icon:"ant-design:home-outlined",type:"group",items:[{title:"首页",path:"/",icon:"ant-design:home-outlined",isTabFixed:!0},{title:"自定义实体类",path:"/custom",icon:"ant-design:home-outlined",isTabFixed:!0}]}];var l=a(7765),d=a(1790),c=a(3704),h=a(6363),u=a(4115),g=a(9851),p=a.n(g);function y(){return(0,s.jsx)("p",{children:" Loading "})}let b=[{path:"/",Component:r.Layout,HydrateFallback:y,children:[{index:!0,path:"/",HydrateFallback:y,Component:p()(()=>{let[e]=d.A.useForm(),t=(0,l.useFairysPageDataInstance)({getList:async e=>(console.log("打印查询参数",e),await new Promise(e=>setTimeout(e,3e3)),Promise.resolve({total:100,list:Array.from({length:20},(t,a)=>({name:`姓名${a+1+(e.page-1)*e.pageSize}`,age:20+a}))}))}),a=(0,l.useFairysPageDataInstanceSnapshot)(t);return console.log("state-page",a,t),(0,i.useEffect)(()=>{t.onUpdatedPage(1)},[]),(0,s.jsx)(l.FairysPageDataInstanceContext.Provider,{value:t,children:(0,s.jsxs)(r.FairysMainPage,{children:[(0,s.jsx)(r.FairysMainPageSearch,{children:(0,s.jsxs)(d.A,{form:e,initialValues:a.search,onValuesChange:e=>{t.onUpdatedSearch(e)},layout:"inline",children:[(0,s.jsx)(d.A.Item,{label:"姓名",name:"name",children:(0,s.jsx)(c.A,{})}),(0,s.jsx)(d.A.Item,{label:"年龄",name:"age",children:(0,s.jsx)(c.A,{})}),(0,s.jsx)(d.A.Item,{children:(0,s.jsx)(h.Ay,{type:"primary",onClick:()=>t.onUpdatedPage(1),children:"查询"})})]})}),(0,s.jsx)(r.FairysMainPageBody,{children:(0,s.jsx)(u.A,{loading:!!a.loading,rowKey:"name",columns:[{title:"姓名",dataIndex:"name",key:"name"},{title:"年龄",dataIndex:"age",key:"age"}],dataSource:a.dataList,pagination:{total:a.total,current:(null==a?void 0:a.page)||1,pageSize:(null==a?void 0:a.pageSize)||20,onChange(e,a){t.onUpdatedPage(e,a)}}})}),(0,s.jsx)(r.FairysMainPageFooter,{children:(0,s.jsx)(h.Ay,{type:"primary",onClick:()=>{e.setFieldsValue({name:void 0,age:void 0}),t.onResetSearch({name:void 0,age:void 0})},children:"重置"})})]})})},"fairys_admin_keep_alive_/")},{path:"/*",HydrateFallback:y,Component:p()(function(){return(0,s.jsx)(r.ErrorPage404,{})},"fairys_admin_keep_alive_/*")},{path:"/404",HydrateFallback:y,Component:p()(function(){return(0,s.jsx)(r.ErrorPage404,{})},"fairys_admin_keep_alive_/404")},{path:"/custom",HydrateFallback:y,lazy:async()=>{let e=await a.e("587").then(a.bind(a,9558));return{...e,Component:p()(e.Component,"fairys_admin_keep_alive_/custom")}}}]}],m=async()=>new Promise(e=>{setTimeout(()=>{e({code:200,message:"success",data:{menusPermissions:[],btnsPermissions:[],ignorePermissions:[]}})},3e3)}),f=async function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],new Promise(e=>{setTimeout(()=>{e({code:200,message:"success",data:{token:"123456",userName:"fairys",userAvatar:"https://gravatar.com/userimage/233185585/f004e2e1534508a34caef161ef76d9f2.jpeg?size=256"}})},3e3)})},v=async()=>m(),S={username:e=>e?"":"用户名不能为空",password:e=>e?"":"密码不能为空"},P=e=>{let[t,a]=(0,i.useState)(!1),o=r.FairysLoginPage.useForm();return(0,s.jsxs)(i.Fragment,{children:[(0,s.jsxs)(r.FairysLoginPage,{mainClassName:"bg-white dark:bg-gray-900 px-[50px] py-[50px]",title:"登录",form:o,rules:S,children:[(0,s.jsx)(r.FairysLoginPage.FormItem,{name:"username",label:"用户名",required:!0,children:(0,s.jsx)(r.FairysLoginPage.FormItemInput,{placeholder:"请输入用户名"})}),(0,s.jsx)(r.FairysLoginPage.FormItem,{name:"password",label:"密码",required:!0,children:(0,s.jsx)(r.FairysLoginPage.FormItemInput,{placeholder:"请输入密码",type:"password"})}),(0,s.jsx)("button",{onClick:()=>{o.validate().then(t=>{a(!0),f(t.value).then(t=>{200===t.code&&(console.log("登录成功",t),localStorage.setItem("token",t.data.token||""),r.accountDataInstance.updated({userName:t.data.userName||"",userAvatar:t.data.userAvatar||""}),e.onLogin())}).finally(()=>{a(!1)})}).catch(e=>{console.log(e)})},className:"fairys_button_base bg-(--fairys-theme-color)/90 rounded-sm text-white py-[9px] mt-[20px] hover:bg-(--fairys-theme-color) cursor-pointer transition-all duration-300",type:"button",children:"登录"})]}),(0,s.jsx)(r.FairysEnterLoading,{loading:t,tips:"登录中"})]})},x=a.p+"static/image/logo.32924cdd.png";var j=a(6386),w=a(758),F=a(6635);a(2578),r.settingDataInstance.ctor({logo:x,projectName:"Fairys Admin",themeColor:"#af52de"}),r.authDataInstance.onLogout=()=>{console.log("onLogout"),localStorage.removeItem("token")};let R=document.getElementById("root");R&&o.createRoot(R).render((0,s.jsx)(w.Ay,{locale:j.default,componentSize:"small",children:(0,s.jsx)(F.NP,{themeMode:"auto",children:(0,s.jsx)(()=>{(0,i.useMemo)(()=>{let e=localStorage.getItem("token");(0,r.loadingFadeOut)(),r.authDataInstance.updatedStatus(e?"RequestAuth":"Login")},[]);let[e]=(0,r.useAuthDataInstance)(),t=e.status,a=()=>{r.menuDataInstance.ctor(n),r.routerDataInstance.createHashRouter(b),r.authDataInstance.updatedStatus("Auth"),(0,r.loadingFadeOut)()};return((0,i.useEffect)(()=>{"RequestAuth"===t&&(r.authDataInstance.updatedStatus("Loading"),v().then(()=>{a()}))},[]),"Login"===t)?(0,s.jsx)(P,{onLogin:a}):"RequestAuth"===t||"Loading"===t?(0,s.jsx)(r.FairysEnterLoading,{loading:!0}):"NoAuth"===t?(0,s.jsx)("div",{children:"NoAuth"}):(0,s.jsx)(r.FairysWatermarkBase,{zIndex:99,className:"h-full w-full",content:["Fairys","Happy Working"],children:(0,s.jsx)(r.FairysRoot,{isOutletKeepAlive:!1,router:r.routerDataInstance.router,keepAlive:!0})})},{})})}))},7765(e,t,a){a.d(t,{FairysPageDataInstance:()=>s.FairysPageDataInstance,FairysPageDataInstanceContext:()=>s.FairysPageDataInstanceContext,useFairysPageDataInstance:()=>s.useFairysPageDataInstance,useFairysPageDataInstanceSnapshot:()=>s.useFairysPageDataInstanceSnapshot});var s=a(1814)},1814(e,t,a){a.d(t,{FairysPageDataInstance:()=>n,FairysPageDataInstanceContext:()=>d,useFairysPageDataInstance:()=>l,useFairysPageDataInstanceSnapshot:()=>c});var s=a(8990),o=a(9168),r=a(4204),i=a(4041);class n{get defaultStore(){return{dataList:[],page:1,pageSize:20,total:0,search:{},selectedRows:[],selectedRowKeys:[],loading:{},isTabSearch:!1,isTabTable:!1,tabDataList:{},tabKey:"",tabSearch:{},tabPage:{},tabPageSize:{},tabTotal:{},tabSelectedRows:{},tabSelectedRowKeys:{},editVisible:!1,editType:"",editFormData:{}}}constructor(e){var t=this;(0,s._)(this,"ref",e=>(0,o.KR)(e)),(0,s._)(this,"_options",void 0),(0,s._)(this,"store",(0,o.BX)(this.defaultStore)),(0,s._)(this,"onBefore",void 0),(0,s._)(this,"getList",void 0),(0,s._)(this,"getResetValues",void 0),(0,s._)(this,"onUpdatedSearch",e=>{if(this.store.isTabSearch){this.store.tabSearch||(this.store.tabSearch={});let t=this.store.tabSearch[this.store.tabKey];t?Object.assign(t,e):this.store.tabSearch[this.store.tabKey]={...e}}else{let t=this.store.search;t?Object.assign(t,e):this.store.search={...e}}return this}),(0,s._)(this,"onResetSearch",e=>{var t;let a=(null==(t=this.getResetValues)?void 0:t.call(this,this))||{...e};return this.store.isTabSearch?(this.store.tabSearch||(this.store.tabSearch={}),this.store.tabSearch[this.store.tabKey]={...a,...e}):this.store.search={...a,...e},this}),(0,s._)(this,"updatedLoading",e=>(this.store.loading={...this.store.loading,...e},this)),(0,s._)(this,"updatedQueryLoading",function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],a=arguments.length>1?arguments[1]:void 0;return t.store.isTabTable?(t.store.loading||(t.store.loading={}),t.store.loading[`${a||t.store.tabKey}_queryList`]=e):t.store.loading.queryList=e,t}),(0,s._)(this,"getQueryListParams",()=>{var e;let t={...this.store.search,...this.store.isTabSearch?this.store.tabSearch[this.store.tabKey]||{}:this.store.search||{},page:this.store.isTabSearch&&this.store.tabPage[this.store.tabKey]||this.store.page,pageSize:this.store.isTabSearch&&this.store.tabPageSize[this.store.tabKey]||this.store.pageSize};return this.onBefore?null==(e=this.onBefore)?void 0:e.call(this,t,this):t}),(0,s._)(this,"queryList",async()=>{let e=this.store.isTabTable?this.store.tabKey:void 0;this.updatedQueryLoading(!0,e);try{let t=this.getQueryListParams();if(!this.getList)throw Error("请实现获取数据列表方法");let a=await this.getList(t,this);a&&(this.store.isTabTable?(this.store.tabTotal||(this.store.tabTotal={}),this.store.tabTotal[e]=(null==a?void 0:a.total)||0,this.store.tabDataList||(this.store.tabDataList={}),this.store.tabDataList[e]=(0,o.KR)((null==a?void 0:a.list)||[]),this.store.tabSelectedRows||(this.store.tabSelectedRows={}),this.store.tabSelectedRows[e]=(0,o.KR)([]),this.store.tabSelectedRowKeys||(this.store.tabSelectedRowKeys={}),this.store.tabSelectedRowKeys[e]=(0,o.KR)([])):(this.store.total=(null==a?void 0:a.total)||0,this.store.dataList=(0,o.KR)((null==a?void 0:a.list)||[]),this.store.selectedRows=(0,o.KR)([]),this.store.selectedRowKeys=(0,o.KR)([])))}catch(e){console.log("查询列表数据失败",e)}finally{this.updatedQueryLoading(!1,e)}}),(0,s._)(this,"onUpdatedPage",(e,t)=>(this.store.isTabSearch?(this.store.tabPage||(this.store.tabPage={}),this.store.tabPage[this.store.tabKey]=e,t&&(this.store.tabPageSize[this.store.tabKey]=t)):(this.store.page=e,t&&(this.store.pageSize=t)),this.queryList(),this)),(0,s._)(this,"onUpdatedSelected",(e,t)=>(this.store.isTabTable?(this.store.tabSelectedRows||(this.store.tabSelectedRows={}),this.store.tabSelectedRows[this.store.tabKey]=(0,o.KR)(e),this.store.tabSelectedRowKeys||(this.store.tabSelectedRowKeys={}),this.store.tabSelectedRowKeys[this.store.tabKey]=(0,o.KR)(t)):(this.store.selectedRows=(0,o.KR)(e),this.store.selectedRowKeys=(0,o.KR)(t)),this));const{onBefore:a,getList:r,getResetValues:i,...n}=e||{};this.onBefore=a,this.getList=r,this.getResetValues=i,Object.assign(this.store,n),this._options=e||{},console.log("FairysPageDataInstance",this)}}let l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.useRef)();return t.current||(t.current=new n(e)),t.current},d=(0,i.createContext)(void 0),c=e=>{var t,a,s,o,i,n,l,d,c;let h=(0,r.s)(e.store),u=h.isTabTable,g=u?h.tabKey:void 0,p=h.isTabSearch,y=p?h.tabKey:void 0,b=u?null==(t=h.tabDataList)?void 0:t[g]:h.dataList,m=u&&(null==(a=h.tabPage)?void 0:a[g])||h.page,f=u&&(null==(s=h.tabPageSize)?void 0:s[g])||h.pageSize,v=u?null==(o=h.tabTotal)?void 0:o[g]:h.total,S=u?null==(i=h.tabSelectedRows)?void 0:i[g]:h.selectedRows,P=u?null==(n=h.tabSelectedRowKeys)?void 0:n[g]:h.selectedRowKeys,x=u?null==(l=h.loading)?void 0:l[`${g}_queryList`]:null==(d=h.loading)?void 0:d.queryList,j=p?null==(c=h.tabSearch)?void 0:c[y]:h.search;return{isTabTable:u,tabKey:g,isTabSearch:p,searchTabKey:y,dataList:b,page:m,pageSize:f,total:v,selectedRows:S,selectedRowKeys:P,loading:x,search:j}}}},l={};function d(e){var t=l[e];if(void 0!==t)return t.exports;var a=l[e]={exports:{}};return n[e].call(a.exports,a,a.exports,d),a.exports}d.m=n,d.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return d.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,d.t=function(a,s){if(1&s&&(a=this(a)),8&s||"object"==typeof a&&a&&(4&s&&a.__esModule||16&s&&"function"==typeof a.then))return a;var o=Object.create(null);d.r(o);var r={};e=e||[null,t({}),t([]),t(t)];for(var i=2&s&&a;("object"==typeof i||"function"==typeof i)&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach(e=>{r[e]=()=>a[e]});return r.default=()=>a,d.d(o,r),o},d.d=(e,t)=>{for(var a in t)d.o(t,a)&&!d.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},d.f={},d.e=e=>Promise.all(Object.keys(d.f).reduce((t,a)=>(d.f[a](e,t),t),[])),d.u=e=>"static/js/async/"+e+".3739c47d.js",d.miniCssF=e=>""+e+".css",d.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a={},d.l=function(e,t,s,o){if(a[e])return void a[e].push(t);if(void 0!==s)for(var r,i,n=document.getElementsByTagName("script"),l=0;l<n.length;l++){var c=n[l];if(c.getAttribute("src")==e||c.getAttribute("data-rspack")=="example:"+s){r=c;break}}r||(i=!0,(r=document.createElement("script")).timeout=120,d.nc&&r.setAttribute("nonce",d.nc),r.setAttribute("data-rspack","example:"+s),r.src=e),a[e]=[t];var h=function(t,s){r.onerror=r.onload=null,clearTimeout(u);var o=a[e];if(delete a[e],r.parentNode&&r.parentNode.removeChild(r),o&&o.forEach(function(e){return e(s)}),t)return t(s)},u=setTimeout(h.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=h.bind(null,r.onerror),r.onload=h.bind(null,r.onload),i&&document.head.appendChild(r)},d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s=[],d.O=(e,t,a,o)=>{if(t){o=o||0;for(var r=s.length;r>0&&s[r-1][2]>o;r--)s[r]=s[r-1];s[r]=[t,a,o];return}for(var i=1/0,r=0;r<s.length;r++){for(var[t,a,o]=s[r],n=!0,l=0;l<t.length;l++)(!1&o||i>=o)&&Object.keys(d.O).every(e=>d.O[e](t[l]))?t.splice(l--,1):(n=!1,o<i&&(i=o));if(n){s.splice(r--,1);var c=a();void 0!==c&&(e=c)}}return e},d.p="/fairys-hooks/example/",o={410:0},d.f.j=function(e,t){var a=d.o(o,e)?o[e]:void 0;if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((t,s)=>a=o[e]=[t,s]);t.push(a[2]=s);var r=d.p+d.u(e),i=Error();d.l(r,function(t){if(d.o(o,e)&&(0!==(a=o[e])&&(o[e]=void 0),a)){var s=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;i.message="Loading chunk "+e+" failed.\n("+s+": "+r+")",i.name="ChunkLoadError",i.type=s,i.request=r,a[1](i)}},"chunk-"+e,e)}},d.O.j=e=>0===o[e],r=(e,t)=>{var a,s,[r,i,n]=t,l=0;if(r.some(e=>0!==o[e])){for(a in i)d.o(i,a)&&(d.m[a]=i[a]);if(n)var c=n(d)}for(e&&e(t);l<r.length;l++)s=r[l],d.o(o,s)&&o[s]&&o[s][0](),o[s]=0;return d.O(c)},(i=self.webpackChunkexample=self.webpackChunkexample||[]).forEach(r.bind(null,0)),i.push=r.bind(null,i.push.bind(i));var c=d.O(void 0,["783","535","382"],()=>d(6111));c=d.O(c)})();