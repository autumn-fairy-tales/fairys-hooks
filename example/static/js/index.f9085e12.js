(()=>{"use strict";var e,t,a,s,i,r,o,n={6111(e,t,a){var s=a(1085),i=a(5873),r=a(7688),o=a(4041);let n=[{title:"主菜单",path:"main-menu",icon:"ant-design:home-outlined",type:"group",items:[{title:"首页",path:"/",icon:"ant-design:home-outlined",isTabFixed:!0},{title:"自定义实体类",path:"/custom",icon:"ant-design:home-outlined",isTabFixed:!0}]}];var l=a(7765),h=a(1790),d=a(3704),u=a(6363),c=a(4115),g=a(9851),b=a.n(g);function p(){return(0,s.jsx)("p",{children:" Loading "})}let y=[{path:"/",Component:r.Layout,HydrateFallback:p,children:[{index:!0,path:"/",HydrateFallback:p,Component:b()(()=>{let[e]=h.A.useForm(),t=(0,l.useFairysPageData)({getList:async e=>(console.log("打印查询参数",e),await new Promise(e=>setTimeout(e,3e3)),Promise.resolve({total:100,list:Array.from({length:20},(t,a)=>({name:`姓名${a+1+(e.page-1)*e.pageSize}`,age:20+a}))}))}),a=(0,l.useFairysPageDataSnapshot)(t);return console.log("state-page",a,t),(0,o.useEffect)(()=>{t.onUpdatedPage(1)},[]),(0,s.jsx)(l.FairysPageDataContext.Provider,{value:t,children:(0,s.jsxs)(r.FairysMainPage,{children:[(0,s.jsx)(r.FairysMainPageSearch,{children:(0,s.jsxs)(h.A,{form:e,initialValues:a.search,onValuesChange:e=>{t.onUpdatedSearch(e)},layout:"inline",children:[(0,s.jsx)(h.A.Item,{label:"姓名",name:"name",children:(0,s.jsx)(d.A,{})}),(0,s.jsx)(h.A.Item,{label:"年龄",name:"age",children:(0,s.jsx)(d.A,{})}),(0,s.jsx)(h.A.Item,{children:(0,s.jsx)(u.Ay,{type:"primary",onClick:()=>t.onUpdatedPage(1),children:"查询"})})]})}),(0,s.jsx)(r.FairysMainPageBody,{children:(0,s.jsx)(c.A,{loading:!!a.loading,rowKey:"name",columns:[{title:"姓名",dataIndex:"name",key:"name"},{title:"年龄",dataIndex:"age",key:"age"}],dataSource:a.dataList,pagination:{total:a.total,current:(null==a?void 0:a.page)||1,pageSize:(null==a?void 0:a.pageSize)||20,onChange(e,a){t.onUpdatedPage(e,a)}}})}),(0,s.jsx)(r.FairysMainPageFooter,{children:(0,s.jsx)(u.Ay,{type:"primary",onClick:()=>{e.setFieldsValue({name:void 0,age:void 0}),t.onResetSearch({name:void 0,age:void 0})},children:"重置"})})]})})},"fairys_admin_keep_alive_/")},{path:"/*",HydrateFallback:p,Component:b()(function(){return(0,s.jsx)(r.ErrorPage404,{})},"fairys_admin_keep_alive_/*")},{path:"/404",HydrateFallback:p,Component:b()(function(){return(0,s.jsx)(r.ErrorPage404,{})},"fairys_admin_keep_alive_/404")},{path:"/custom",HydrateFallback:p,lazy:async()=>{let e=await a.e("587").then(a.bind(a,9558));return{...e,Component:b()(e.Component,"fairys_admin_keep_alive_/custom")}}}]}],m=async()=>new Promise(e=>{setTimeout(()=>{e({code:200,message:"success",data:{menusPermissions:[],btnsPermissions:[],ignorePermissions:[]}})},3e3)}),f=async function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],new Promise(e=>{setTimeout(()=>{e({code:200,message:"success",data:{token:"123456",userName:"fairys",userAvatar:"https://gravatar.com/userimage/233185585/f004e2e1534508a34caef161ef76d9f2.jpeg?size=256"}})},3e3)})},v=async()=>m(),S={username:e=>e?"":"用户名不能为空",password:e=>e?"":"密码不能为空"},P=e=>{let[t,a]=(0,o.useState)(!1),i=r.FairysLoginPage.useForm();return(0,s.jsxs)(o.Fragment,{children:[(0,s.jsxs)(r.FairysLoginPage,{mainClassName:"bg-white dark:bg-gray-900 px-[50px] py-[50px]",title:"登录",form:i,rules:S,children:[(0,s.jsx)(r.FairysLoginPage.FormItem,{name:"username",label:"用户名",required:!0,children:(0,s.jsx)(r.FairysLoginPage.FormItemInput,{placeholder:"请输入用户名"})}),(0,s.jsx)(r.FairysLoginPage.FormItem,{name:"password",label:"密码",required:!0,children:(0,s.jsx)(r.FairysLoginPage.FormItemInput,{placeholder:"请输入密码",type:"password"})}),(0,s.jsx)("button",{onClick:()=>{i.validate().then(t=>{a(!0),f(t.value).then(t=>{200===t.code&&(console.log("登录成功",t),localStorage.setItem("token",t.data.token||""),r.accountDataInstance.updated({userName:t.data.userName||"",userAvatar:t.data.userAvatar||""}),e.onLogin())}).finally(()=>{a(!1)})}).catch(e=>{console.log(e)})},className:"fairys_button_base bg-(--fairys-theme-color)/90 rounded-sm text-white py-[9px] mt-[20px] hover:bg-(--fairys-theme-color) cursor-pointer transition-all duration-300",type:"button",children:"登录"})]}),(0,s.jsx)(r.FairysEnterLoading,{loading:t,tips:"登录中"})]})},L=a.p+"static/image/logo.32924cdd.png";var x=a(6386),F=a(758),j=a(6635);a(2578),r.settingDataInstance.ctor({logo:L,projectName:"Fairys Admin",themeColor:"#af52de"}),r.authDataInstance.onLogout=()=>{console.log("onLogout"),localStorage.removeItem("token")};let T=document.getElementById("root");T&&i.createRoot(T).render((0,s.jsx)(F.Ay,{locale:x.default,componentSize:"small",children:(0,s.jsx)(j.NP,{themeMode:"auto",children:(0,s.jsx)(()=>{(0,o.useMemo)(()=>{let e=localStorage.getItem("token");(0,r.loadingFadeOut)(),r.authDataInstance.updatedStatus(e?"RequestAuth":"Login")},[]);let[e]=(0,r.useAuthDataInstance)(),t=e.status,a=()=>{r.menuDataInstance.ctor(n),r.routerDataInstance.createHashRouter(y),r.authDataInstance.updatedStatus("Auth"),(0,r.loadingFadeOut)()};return((0,o.useEffect)(()=>{"RequestAuth"===t&&(r.authDataInstance.updatedStatus("Loading"),v().then(()=>{a()}))},[]),"Login"===t)?(0,s.jsx)(P,{onLogin:a}):"RequestAuth"===t||"Loading"===t?(0,s.jsx)(r.FairysEnterLoading,{loading:!0}):"NoAuth"===t?(0,s.jsx)("div",{children:"NoAuth"}):(0,s.jsx)(r.FairysWatermarkBase,{zIndex:99,className:"h-full w-full",content:["Fairys","Happy Working"],children:(0,s.jsx)(r.FairysRoot,{isOutletKeepAlive:!1,router:r.routerDataInstance.router,keepAlive:!0})})},{})})}))},7765(e,t,a){a.d(t,{FairysPageData:()=>s.FairysPageData,FairysPageDataContext:()=>s.FairysPageDataContext,useFairysPageData:()=>s.useFairysPageData,useFairysPageDataSnapshot:()=>s.useFairysPageDataSnapshot});var s=a(1814)},1814(e,t,a){a.d(t,{FairysPageData:()=>n,FairysPageDataContext:()=>h,useFairysPageData:()=>l,useFairysPageDataSnapshot:()=>d});var s=a(8990),i=a(9168),r=a(4204),o=a(4041);class n{get defaultStore(){return{dataList:(0,i.KR)([]),page:1,pageSize:20,total:0,search:{},selectedRows:(0,i.KR)([]),selectedRowKeys:(0,i.KR)([]),loading:{},isTabSearch:!1,isTabTable:!1,tabDataList:{},tabKey:"",tabSearch:{},tabPage:{},tabPageSize:{},tabTotal:{},tabSelectedRows:{},tabSelectedRowKeys:{},editVisible:!1,editType:"",editFormData:{},refresherStatus:!1,loadMoreStatus:!1,hasLastPage:!1,tabRefresherStatus:{},tabLoadMoreStatus:{},tabHasLastPage:{}}}constructor(e){var t=this;(0,s._)(this,"ref",e=>(0,i.KR)(e)),(0,s._)(this,"_options",void 0),(0,s._)(this,"store",(0,i.BX)(this.defaultStore)),(0,s._)(this,"formatQuery",void 0),(0,s._)(this,"getList",void 0),(0,s._)(this,"getResetValues",void 0),(0,s._)(this,"codeFields",[]),(0,s._)(this,"valueFields",[]),(0,s._)(this,"onUpdatedSearch",e=>{if(this.store.isTabSearch){this.store.tabSearch||(this.store.tabSearch={});let t=this.store.tabSearch[this.store.tabKey];t?Object.assign(t,e):this.store.tabSearch[this.store.tabKey]={...e}}else{let t=this.store.search;t?Object.assign(t,e):this.store.search={...e}}return this}),(0,s._)(this,"onResetSearch",(e,t)=>{var a;let s=this.store.isTabSearch?"string"==typeof t||"number"==typeof t?t:this.store.tabKey:void 0,i=(null==(a=this.getResetValues)?void 0:a.call(this,this,s))||{...e};return this.store.isTabSearch?(this.store.tabSearch||(this.store.tabSearch={}),this.store.tabSearch[s]={...i,...e}):this.store.search={...i,...e},this}),(0,s._)(this,"updatedLoading",e=>(this.store.loading={...this.store.loading,...e},this)),(0,s._)(this,"updatedQueryLoading",function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],a=arguments.length>1?arguments[1]:void 0;return t.store.isTabTable?(t.store.loading||(t.store.loading={}),t.store.loading[`${a||t.store.tabKey}_queryList`]=e):t.store.loading.queryList=e,t}),(0,s._)(this,"getQueryListParams",e=>{var t,a,s,i,r,o;let n=this.store.isTabTable?"string"==typeof e||"number"==typeof e?e:this.store.tabKey:void 0,l={...this.store.isTabSearch?(null==(t=this.store.tabSearch)?void 0:t[n])||{}:this.store.search||{},page:this.store.isTabTable&&(null==(a=this.store.tabPage)?void 0:a[n])||this.store.page,pageSize:this.store.isTabTable&&(null==(s=this.store.tabPageSize)?void 0:s[n])||this.store.pageSize},h={...l};if(Array.isArray(this.valueFields)&&this.valueFields.length)for(let e=0;e<this.valueFields.length;e++){let t=this.valueFields[e];h[t]=null==(r=l[t])?void 0:r.value}if(Array.isArray(this.codeFields)&&this.codeFields.length)for(let e=0;e<this.codeFields.length;e++){let t=this.codeFields[e];h[t]=null==(o=l[t])?void 0:o.code}return this.formatQuery?null==(i=this.formatQuery)?void 0:i.call(this,h,this,n):h}),(0,s._)(this,"updatedRefresherOrLoadMoreStatus",(e,t,a)=>(a?(this.store.tabRefresherStatus||(this.store.tabRefresherStatus={}),this.store.tabLoadMoreStatus||(this.store.tabLoadMoreStatus={}),1===t?this.store.tabRefresherStatus[a]=e:this.store.tabLoadMoreStatus[a]=e):1===t?this.store.refresherStatus=e:this.store.loadMoreStatus=e,this)),(0,s._)(this,"queryList",async()=>{let e=this.store.isTabTable?this.store.tabKey:void 0,t=this.store.isTabTable&&this.store.tabPage[e]||this.store.page;this.updatedQueryLoading(!0,e);try{let a=this.getQueryListParams(e);if(!this.getList)throw Error("请实现获取数据列表方法");this.updatedRefresherOrLoadMoreStatus(!0,t,e);let s=await this.getList(a,this,e);s&&(this.store.isTabTable?(this.store.tabTotal||(this.store.tabTotal={}),this.store.tabTotal[e]=(null==s?void 0:s.total)||0,this.store.tabDataList||(this.store.tabDataList={}),this.store.tabDataList[e]=(0,i.KR)((null==s?void 0:s.list)||[]),this.store.enableScrollLoad?1===t&&this.onUpdatedSelected([],[],e):this.onUpdatedSelected([],[],e)):(this.store.total=(null==s?void 0:s.total)||0,this.store.dataList=(0,i.KR)((null==s?void 0:s.list)||[]),this.onUpdatedSelected([],[])))}catch(e){console.log("查询列表数据失败",e)}finally{this.updatedQueryLoading(!1,e),this.updatedRefresherOrLoadMoreStatus(!1,t,e)}}),(0,s._)(this,"onUpdatedPage",async(e,t)=>(this.store.isTabSearch?(this.store.tabPage||(this.store.tabPage={}),this.store.tabPage[this.store.tabKey]=e,t&&(this.store.tabPageSize[this.store.tabKey]=t)):(this.store.page=e,t&&(this.store.pageSize=t)),await this.queryList(),this)),(0,s._)(this,"onUpdatedSelected",(e,t,a)=>{let s=this.store.isTabTable?"string"==typeof a||"number"==typeof a?a:this.store.tabKey:void 0;return this.store.isTabTable?(this.store.tabSelectedRows||(this.store.tabSelectedRows={}),this.store.tabSelectedRows[s]=(0,i.KR)(e),this.store.tabSelectedRowKeys||(this.store.tabSelectedRowKeys={}),this.store.tabSelectedRowKeys[s]=(0,i.KR)(t)):(this.store.selectedRows=(0,i.KR)(e),this.store.selectedRowKeys=(0,i.KR)(t)),this}),(0,s._)(this,"onLoadMore",async()=>{var e;let t=this.store.isTabTable,a=this.store.isTabTable?this.store.tabKey:void 0;if(!(this.store.isTabTable?null==(e=this.store.loading)?void 0:e[`${a}_queryList`]:this.store.loading.queryList)){if(t){this.store.tabHasLastPage||(this.store.tabHasLastPage={}),this.store.tabTotal||(this.store.tabTotal={}),this.store.tabPage||(this.store.tabPage={}),this.store.tabPageSize||(this.store.tabPageSize={}),this.store.tabLoadMoreStatus||(this.store.tabLoadMoreStatus={});let e=this.store.tabTotal[a]||0,t=this.store.tabPage[a]||1,s=Math.ceil(e/(this.store.tabPageSize[a]||this.store.pageSize||20)),i=!1;if(t>=s&&e){i=!0,this.store.tabHasLastPage[a]=i;return}let r=t+1;r>=s&&e&&(i=!0),this.store.tabLoadMoreStatus[a]=!0,this.store.tabPage[a]=r,await this.queryList(),this.store.tabHasLastPage[a]=i;return}{let e=this.store.total||0,t=this.store.page||1,a=Math.ceil(e/(this.store.pageSize||20)),s=!1;if(t>=a&&e){s=!0,this.store.hasLastPage=s;return}let i=t+1;i>=a&&e&&(s=!0),this.store.loading.loadMore=!0,this.store.page=i,await this.queryList(),this.store.hasLastPage=s}}});const{formatQuery:a,getList:r,getResetValues:o,codeFields:n,valueFields:l,...h}=e;this.formatQuery=a,this.getList=r,this.getResetValues=o,this.codeFields=n||[],this.valueFields=l||[],Object.assign(this.store,h),this._options=e}}let l=e=>{let t=(0,o.useRef)();return t.current||(t.current=new n(e)),t.current},h=(0,o.createContext)(void 0),d=(e,t)=>{var a,s,i,o,n,l,h,d,u,c,g,b;let p=(0,r.s)(e.store,t),y=p.isTabTable,m=y?p.tabKey:void 0,f=p.isTabSearch,v=f?p.tabKey:void 0,S=y?null==(a=p.tabDataList)?void 0:a[m]:p.dataList,P=y&&(null==(s=p.tabPage)?void 0:s[m])||p.page,L=y&&(null==(i=p.tabPageSize)?void 0:i[m])||p.pageSize,x=y?null==(o=p.tabTotal)?void 0:o[m]:p.total,F=y?null==(n=p.tabSelectedRows)?void 0:n[m]:p.selectedRows,j=y?null==(l=p.tabSelectedRowKeys)?void 0:l[m]:p.selectedRowKeys,T=y?null==(h=p.loading)?void 0:h[`${m}_queryList`]:null==(d=p.loading)?void 0:d.queryList,_=f?null==(u=p.tabSearch)?void 0:u[v]:p.search,R=p.enableScrollLoad,w=y?null==(c=p.tabRefresherStatus)?void 0:c[m]:p.refresherStatus,A=y?null==(g=p.tabLoadMoreStatus)?void 0:g[m]:p.loadMoreStatus,K=y?null==(b=p.tabHasLastPage)?void 0:b[m]:p.hasLastPage;return{state:p,fairysPageData:e,isTabTable:y,tabKey:m,isTabSearch:f,searchTabKey:v,dataList:S,page:P,pageSize:L,total:x,selectedRows:F,selectedRowKeys:j,loading:T,search:_,enableScrollLoad:R,refresherStatus:w,loadMoreStatus:A,hasLastPage:K}}}},l={};function h(e){var t=l[e];if(void 0!==t)return t.exports;var a=l[e]={exports:{}};return n[e].call(a.exports,a,a.exports,h),a.exports}h.m=n,h.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return h.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,h.t=function(a,s){if(1&s&&(a=this(a)),8&s||"object"==typeof a&&a&&(4&s&&a.__esModule||16&s&&"function"==typeof a.then))return a;var i=Object.create(null);h.r(i);var r={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&a;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>{r[e]=()=>a[e]});return r.default=()=>a,h.d(i,r),i},h.d=(e,t)=>{for(var a in t)h.o(t,a)&&!h.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},h.f={},h.e=e=>Promise.all(Object.keys(h.f).reduce((t,a)=>(h.f[a](e,t),t),[])),h.u=e=>"static/js/async/"+e+".4e7718b5.js",h.miniCssF=e=>""+e+".css",h.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),h.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a={},h.l=function(e,t,s,i){if(a[e])return void a[e].push(t);if(void 0!==s)for(var r,o,n=document.getElementsByTagName("script"),l=0;l<n.length;l++){var d=n[l];if(d.getAttribute("src")==e||d.getAttribute("data-rspack")=="example:"+s){r=d;break}}r||(o=!0,(r=document.createElement("script")).timeout=120,h.nc&&r.setAttribute("nonce",h.nc),r.setAttribute("data-rspack","example:"+s),r.src=e),a[e]=[t];var u=function(t,s){r.onerror=r.onload=null,clearTimeout(c);var i=a[e];if(delete a[e],r.parentNode&&r.parentNode.removeChild(r),i&&i.forEach(function(e){return e(s)}),t)return t(s)},c=setTimeout(u.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=u.bind(null,r.onerror),r.onload=u.bind(null,r.onload),o&&document.head.appendChild(r)},h.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s=[],h.O=(e,t,a,i)=>{if(t){i=i||0;for(var r=s.length;r>0&&s[r-1][2]>i;r--)s[r]=s[r-1];s[r]=[t,a,i];return}for(var o=1/0,r=0;r<s.length;r++){for(var[t,a,i]=s[r],n=!0,l=0;l<t.length;l++)(!1&i||o>=i)&&Object.keys(h.O).every(e=>h.O[e](t[l]))?t.splice(l--,1):(n=!1,i<o&&(o=i));if(n){s.splice(r--,1);var d=a();void 0!==d&&(e=d)}}return e},h.p="/fairys-hooks/example/",i={410:0},h.f.j=function(e,t){var a=h.o(i,e)?i[e]:void 0;if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((t,s)=>a=i[e]=[t,s]);t.push(a[2]=s);var r=h.p+h.u(e),o=Error();h.l(r,function(t){if(h.o(i,e)&&(0!==(a=i[e])&&(i[e]=void 0),a)){var s=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;o.message="Loading chunk "+e+" failed.\n("+s+": "+r+")",o.name="ChunkLoadError",o.type=s,o.request=r,a[1](o)}},"chunk-"+e,e)}},h.O.j=e=>0===i[e],r=(e,t)=>{var a,s,[r,o,n]=t,l=0;if(r.some(e=>0!==i[e])){for(a in o)h.o(o,a)&&(h.m[a]=o[a]);if(n)var d=n(h)}for(e&&e(t);l<r.length;l++)s=r[l],h.o(i,s)&&i[s]&&i[s][0](),i[s]=0;return h.O(d)},(o=self.webpackChunkexample=self.webpackChunkexample||[]).forEach(r.bind(null,0)),o.push=r.bind(null,o.push.bind(o));var d=h.O(void 0,["783","535","382"],()=>h(6111));d=h.O(d)})();